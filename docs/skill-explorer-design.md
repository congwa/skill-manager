# Skill Explorer è®¾è®¡æ–‡æ¡£

## ä¸€ã€åŠŸèƒ½æ¦‚è¿°

ä¸€ä¸ªç±» VS Code çš„ Skill æµè§ˆå™¨è§†å›¾ï¼Œå·¦ä¾§ä¸ºæ–‡ä»¶æ ‘ï¼Œå³ä¾§ä¸ºå†…å®¹é¢æ¿ã€‚
ä½¿ç”¨ **CodeMirror 6** ä½œä¸ºä»£ç ç¼–è¾‘å™¨ï¼Œæä¾›è¯­æ³•é«˜äº®ã€è¡Œå·ã€ä»£ç æŠ˜å ç­‰ä¸“ä¸šç¼–è¾‘ä½“éªŒã€‚

## äºŒã€é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ—‚ Skill Explorer                      [å…¨éƒ¨å±•å¼€] [ğŸ”æœç´¢] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ Skills (12)   â”‚  â”Œâ”€ Tab æ ï¼ˆå¤šæ–‡ä»¶æ ‡ç­¾é¡µï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”œâ”€ ğŸ“‚ my-skill   â”‚  â”‚ [SKILL.md Ã—] [run.sh Ã—] [+]         â”‚â”‚
â”‚  â”‚  â”œâ”€ SKILL.md   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”‚  â”œâ”€ scripts/   â”‚  â”Œâ”€ ç¼–è¾‘å™¨åŒºåŸŸï¼ˆCodeMirror 6ï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  â”‚  â””â”€ run.sh  â”‚  â”‚ 1  ---                               â”‚â”‚
â”‚  â”‚  â””â”€ ref.md     â”‚  â”‚ 2  name: my-skill                    â”‚â”‚
â”‚  â”œâ”€ ğŸ“‚ another    â”‚  â”‚ 3  description: A useful skill       â”‚â”‚
â”‚  â”‚  â”œâ”€ SKILL.md   â”‚  â”‚ 4  version: 1.0.0                    â”‚â”‚
â”‚  â”‚  â””â”€ data.json  â”‚  â”‚ 5  ---                               â”‚â”‚
â”‚  â””â”€ ğŸ“‚ third      â”‚  â”‚ 6                                    â”‚â”‚
â”‚     â””â”€ SKILL.md   â”‚  â”‚ 7  # My Skill                        â”‚â”‚
â”‚                   â”‚  â”‚ 8                                    â”‚â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚ 9  This skill helps...               â”‚â”‚
â”‚ ğŸ“‹ Skill è¯¦æƒ…     â”‚  â”‚                                      â”‚â”‚
â”‚ åç§°: my-skill   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚ ç‰ˆæœ¬: 1.0.0      â”‚  â”Œâ”€ åº•éƒ¨çŠ¶æ€æ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ æè¿°: ...        â”‚  â”‚ Markdown â”‚ UTF-8 â”‚ Ln 7, Col 3 [ä¿å­˜]â”‚â”‚
â”‚ éƒ¨ç½²: 3 ä¸ªé¡¹ç›®    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¸ƒå±€åˆ†åŒº

| åŒºåŸŸ | è¯´æ˜ |
|------|------|
| **å·¦ä¾§é¢æ¿** | ä¸Š: File Treeï¼ˆå¯æœç´¢è¿‡æ»¤ï¼‰ï¼›ä¸‹: Skill è¯¦æƒ…ï¼ˆé€‰ä¸­ Skill æ—¶æ˜¾ç¤ºï¼‰ |
| **å³ä¾§é¢æ¿** | ä¸Š: Tab æ ‡ç­¾æ ï¼ˆå¤šæ–‡ä»¶ï¼‰ï¼›ä¸­: CodeMirror ç¼–è¾‘å™¨ï¼›ä¸‹: çŠ¶æ€æ  |
| **å·¦å³åˆ†å‰²** | å¯æ‹–æ‹½è°ƒæ•´å®½åº¦ï¼Œé»˜è®¤å·¦ 280px / å³è‡ªé€‚åº” |

## ä¸‰ã€äº¤äº’è¡Œä¸º

| æ“ä½œ | å“åº” |
|------|------|
| ç‚¹å‡»æ–‡ä»¶å¤¹åï¼ˆSkill åç§°ï¼‰ | å·¦ä¸‹æ–¹å±•ç¤º Skill è¯¦æƒ…ï¼›æ–‡ä»¶æ ‘å±•å¼€/æŠ˜å  |
| ç‚¹å‡»æ–‡ä»¶ | å³ä¾§ Tab æ æ‰“å¼€è¯¥æ–‡ä»¶ï¼ŒCodeMirror åŠ è½½å†…å®¹ |
| åŒå‡»å·²æ‰“å¼€ Tab | å›ºå®šè¯¥ Tabï¼ˆéä¸´æ—¶é¢„è§ˆï¼‰ |
| ç¼–è¾‘æ–‡ä»¶ + Cmd+S | è°ƒç”¨ `writeFile` ä¿å­˜ï¼ŒTab æ ‡è®°æ¶ˆé™¤ |
| å…³é—­ Tab (Ã—) | æœªä¿å­˜æ—¶å¼¹ç¡®è®¤æ¡† |
| æœç´¢æ¡†è¾“å…¥ | æŒ‰ Skill åç§°å®æ—¶è¿‡æ»¤æ–‡ä»¶æ ‘ |
| å…¨éƒ¨å±•å¼€/æŠ˜å  | åˆ‡æ¢æ‰€æœ‰ Skill æ–‡ä»¶å¤¹ |

## å››ã€CodeMirror 6 é…ç½®

### æ ¸å¿ƒåŒ…

```bash
pnpm add @codemirror/view @codemirror/state @codemirror/commands
```

### è¯­è¨€æ”¯æŒ

```bash
pnpm add @codemirror/lang-markdown @codemirror/lang-json @codemirror/lang-javascript @codemirror/language-data
```

### ä¸»é¢˜å’Œæ‰©å±•

```bash
pnpm add @codemirror/theme-one-dark
```

### ç¼–è¾‘å™¨åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ | CodeMirror æ‰©å±• |
|------|-----------------|
| è¡Œå· | `lineNumbers()` |
| ä»£ç æŠ˜å  | `foldGutter()` |
| æ‹¬å·åŒ¹é… | `bracketMatching()` |
| é«˜äº®å½“å‰è¡Œ | `highlightActiveLine()` |
| æœç´¢æ›¿æ¢ | `search()` |
| è‡ªåŠ¨ç¼©è¿› | `indentOnInput()` |
| Markdown è¯­æ³•é«˜äº® | `markdown()` + `languages` |
| æš—è‰²/äº®è‰²ä¸»é¢˜ | `oneDark` æˆ–è‡ªå®šä¹‰ä¸»é¢˜ |
| é”®ç›˜å¿«æ·é”® | `keymap.of([...defaultKeymap, indentWithTab])` |
| Cmd+S ä¿å­˜ | è‡ªå®šä¹‰ keymap |

### æŒ‰æ–‡ä»¶ç±»å‹è‡ªåŠ¨é€‰æ‹©è¯­è¨€

| æ‰©å±•å | è¯­è¨€æ¨¡å¼ |
|--------|---------|
| `.md` | `markdown()` with `languages` |
| `.json` | `json()` |
| `.js` / `.ts` | `javascript()` / `javascript({ typescript: true })` |
| `.sh` | çº¯æ–‡æœ¬ |
| `.yaml` / `.yml` | `yaml()` (éœ€é¢å¤–å®‰è£… `@codemirror/legacy-modes`) |
| å…¶ä»– | çº¯æ–‡æœ¬ |

## äº”ã€æ•°æ®æµ

### åˆå§‹åŒ–
1. è°ƒç”¨ `skillsApi.getAll()` è·å–æ‰€æœ‰ Skill åˆ—è¡¨
2. å¯¹æœ‰ `local_path` çš„ Skillï¼Œè°ƒç”¨ `skillsApi.listFiles(skill.local_path)` è·å–æ–‡ä»¶åˆ—è¡¨
3. æ„å»º `TreeViewElement[]` æ•°æ®ç»“æ„ï¼ŒSkill åä¸ºæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶ä¸ºå¶èŠ‚ç‚¹
4. æ–‡ä»¶åˆ—è¡¨å¼‚æ­¥åŠ è½½ï¼Œå…ˆæ˜¾ç¤º Skill æ–‡ä»¶å¤¹éª¨æ¶

### æ‰“å¼€æ–‡ä»¶
1. ç‚¹å‡»æ–‡ä»¶èŠ‚ç‚¹ â†’ æ£€æŸ¥æ˜¯å¦å·²åœ¨ Tab ä¸­æ‰“å¼€
2. æœªæ‰“å¼€ â†’ è°ƒç”¨ `skillsApi.readFile(absolutePath)` è¯»å–å†…å®¹
3. åˆ›å»º Tab è®°å½• `{ id, fileName, filePath, content, originalContent, isDirty }`
4. CodeMirror åˆå§‹åŒ– / åˆ‡æ¢åˆ°è¯¥æ–‡æ¡£

### ä¿å­˜æ–‡ä»¶
1. Cmd+S æˆ–ç‚¹å‡»ä¿å­˜æŒ‰é’®
2. è°ƒç”¨ `skillsApi.writeFile(filePath, currentContent)`
3. æ›´æ–° `originalContent = currentContent`ï¼Œ`isDirty = false`
4. toast æç¤º"å·²ä¿å­˜"

### Skill è¯¦æƒ…
- ä» `useSkillStore` ä¸­è¯»å– Skill å…ƒæ•°æ®
- ä» `useSkillStore.deployments` ä¸­è¿‡æ»¤å‡ºè¯¥ Skill çš„éƒ¨ç½²åˆ—è¡¨

## å…­ã€æ‰€éœ€ç»„ä»¶

### å·²æœ‰ç»„ä»¶

| ç»„ä»¶ | æ¥æº | ç”¨é€” |
|------|------|------|
| `Tree` / `Folder` / `File` / `CollapseButton` | `@/components/ui/file-tree` | æ–‡ä»¶æ ‘ |
| `Card` / `CardContent` | `@/components/ui/card` | è¯¦æƒ…é¢æ¿ |
| `Badge` | `@/components/ui/badge` | ç‰ˆæœ¬/çŠ¶æ€æ ‡è®° |
| `Button` | `@/components/ui/button` | ä¿å­˜/æ“ä½œæŒ‰é’® |
| `Input` | `@/components/ui/input` | æœç´¢æ¡† |
| `ScrollArea` | `@/components/ui/scroll-area` | æ–‡ä»¶æ ‘æ»šåŠ¨ |
| `Tooltip` | `@/components/ui/tooltip` | è·¯å¾„æç¤º |
| `Skeleton` | `@/components/ui/skeleton` | åŠ è½½æ€ |
| `AlertDialog` | `@/components/ui/alert-dialog` | æœªä¿å­˜å…³é—­ç¡®è®¤ |

### éœ€æ–°å»ºçš„ç»„ä»¶

| ç»„ä»¶ | è·¯å¾„ | èŒè´£ |
|------|------|------|
| **SkillExplorer** | `@/pages/SkillExplorer.tsx` | ä¸»é¡µé¢ï¼šå·¦å³åˆ†æ  + çŠ¶æ€ç®¡ç† |
| **CodeEditor** | `@/components/editor/CodeEditor.tsx` | CodeMirror 6 å°è£…ï¼šåˆå§‹åŒ–ã€ä¸»é¢˜ã€è¯­è¨€åˆ‡æ¢ã€Cmd+S |
| **EditorTabs** | `@/components/editor/EditorTabs.tsx` | Tab æ ‡ç­¾æ ï¼šå¤šæ–‡ä»¶åˆ‡æ¢ã€å…³é—­ã€è„æ ‡è®° |
| **SkillInfoPanel** | `@/components/editor/SkillInfoPanel.tsx` | å·¦ä¸‹è§’ Skill è¯¦æƒ…é¢æ¿ |
| **EditorStatusBar** | `@/components/editor/EditorStatusBar.tsx` | åº•éƒ¨çŠ¶æ€æ ï¼šè¯­è¨€ã€ç¼–ç ã€è¡Œåˆ—å·ã€ä¿å­˜æŒ‰é’® |

## ä¸ƒã€è·¯ç”±

```tsx
<Route path="/explorer" element={<SkillExplorer />} />
```

ä¾§è¾¹æ å¯¼èˆªåœ¨"Skill åˆ—è¡¨"ä¸‹æ–¹æ·»åŠ "Skill Explorer"å…¥å£ï¼Œå›¾æ ‡ç”¨ `FolderTree` æˆ– `Code2`ã€‚

## å…«ã€æ–‡ä»¶ç»“æ„

```
frontend/src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ SkillExplorer.tsx              â† ä¸»é¡µé¢
â”œâ”€â”€ components/
â”‚   â””â”€â”€ editor/
â”‚       â”œâ”€â”€ CodeEditor.tsx             â† CodeMirror 6 å°è£…ç»„ä»¶
â”‚       â”œâ”€â”€ EditorTabs.tsx             â† å¤šæ–‡ä»¶ Tab æ ‡ç­¾æ 
â”‚       â”œâ”€â”€ SkillInfoPanel.tsx         â† Skill è¯¦æƒ…é¢æ¿
â”‚       â””â”€â”€ EditorStatusBar.tsx        â† åº•éƒ¨çŠ¶æ€æ 
â””â”€â”€ components/ui/
    â””â”€â”€ file-tree.tsx                  â† Magic UI File Treeï¼ˆå·²å®‰è£…ï¼‰
```

## ä¹ã€å®ç°æ­¥éª¤

1. **å®‰è£… CodeMirror 6 ä¾èµ–**
2. **åˆ›å»º CodeEditor ç»„ä»¶**ï¼šå°è£… CodeMirrorï¼Œæ”¯æŒè¯­è¨€åˆ‡æ¢ã€ä¸»é¢˜ã€Cmd+S
3. **åˆ›å»º EditorTabs ç»„ä»¶**ï¼šå¤šæ–‡ä»¶æ ‡ç­¾é¡µç®¡ç†
4. **åˆ›å»º SkillInfoPanel ç»„ä»¶**ï¼šSkill è¯¦æƒ…å±•ç¤º
5. **åˆ›å»º EditorStatusBar ç»„ä»¶**ï¼šçŠ¶æ€æ 
6. **åˆ›å»º SkillExplorer ä¸»é¡µé¢**ï¼šç»„è£…æ‰€æœ‰å­ç»„ä»¶ï¼Œç®¡ç†çŠ¶æ€
7. **æ³¨å†Œè·¯ç”± + ä¾§è¾¹æ å¯¼èˆª**
8. **ç¼–è¯‘éªŒè¯**
