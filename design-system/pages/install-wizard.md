# Skill 安装向导 (Install Wizard)

> **呈现方式**: `@shadcn/dialog` Modal 弹窗（全屏遮罩 + 居中面板）
> **触发入口**: skills.sh 安装按钮 / Skill 详情页「部署到新位置」/ 项目详情页「部署 Skill」
> **继承**: MASTER.md 全部规范

---

## 页面概述

分步引导式安装/部署 Skill 的弹窗。共 4 步，顶部有步骤进度条。弹窗宽度 640px，最大高度 80vh，超出可滚动。

---

## 步骤进度条

顶部水平进度条，4 个圆形步骤节点 + 连接线：

- 已完成步：薄荷绿实心圆 + 绿色连线
- 当前步：蜜桃粉实心圆（脉动动画）+ 灰色连线
- 未完成步：`cream-300` 空心圆 + 灰色连线
- 节点下方：步骤名称（Caption）

---

## Step 1: Skill 信息确认

**内容**：
- Skill 名称（H2）+ 版本 + 来源标签
- 描述（Body）
- 来源 URL（Caption，可点击）
- 如果是 skills.sh 安装：显示安装量 + 评分
- 如果是从 Skill 详情页进入：预选当前 Skill，此步可快速跳过

**动画**：scaleIn 弹窗入场

**异步操作**：
| 操作 | 加载方式 |
|------|---------|
| 加载 Skill 详情（如从 store 进入） | 弹窗内骨架屏（< 1s） |

---

## Step 2: 选择目标工具

**内容**：
- 标题："安装到哪些工具？"
- 5 个工具选项卡片（`@shadcn/checkbox` 可多选），每张：
  - 工具 SVG 图标（品牌色，32px）
  - 工具名称（H3）
  - 选中态：`peach-100` 底 + `peach-300` 边框 + 右上角 ✓（薄荷绿）
  - 未选中态：`white` 底 + `cream-300` 边框
- 布局：横向 5 列（或 flex-wrap）

**动画**：
- 5 张卡片 stagger 渐入（0.06s 间隔）
- 选中/取消：Framer Motion `layout` + 边框颜色过渡

---

## Step 3: 选择安装范围

**内容**：
- 标题："安装到哪里？"
- 两大选项（`@shadcn/radio-group` 单选，大卡片切换）：
  - **项目级**：Lucide: `folder-open`，"安装到指定项目"
    - 选中后展开项目选择列表（从数据库加载）
    - `@shadcn/checkbox` 可多选项目
    - 每个项目条目：项目名 + 路径（Caption）+ 勾选框
  - **全局级**：Lucide: `globe`，"安装到工具全局目录"
    - 说明文案："所有项目都可以使用"

**动画**：
- 选项切换：`layoutId` 高亮框动画
- 项目列表展开：高度动画 + 列表 stagger 渐入

**异步操作**：
| 操作 | 加载方式 |
|------|---------|
| 加载项目列表 | 列表骨架屏（< 200ms） |

---

## Step 4: 冲突检测 + 确认

**内容**：
- 标题："安装预览"
- 安装目标列表（只读）：
  - 每行：工具图标 + 项目名/全局 + 目标路径
  - 状态列：
    - ✓ 可直接安装（薄荷绿）
    - ⚠ 已存在同名（蜂蜜橙）→ 展开冲突详情
    - ✗ 路径不可写（草莓红）
- 冲突项展开内容：
  - 简要 Diff 预览（3 行摘要）
  - 操作选项（`@shadcn/radio-group`）：覆盖 / 保留本地 / 查看完整 Diff（打开 diff-viewer）
- 底部按钮：「确认安装」Primary Clay + 「取消」Ghost

**动画**：
- 检测过程：逐项检查，每项前依次出现 Spinner → ✓/⚠/✗（stagger）
- 全部检查完成后底部按钮 fadeInUp 显示

**异步操作**：
| 操作 | 加载方式 |
|------|---------|
| 冲突预检（逐目标检查） | 逐项 Spinner → 结果图标（1s ~ 5s 总计） |
| 执行安装（文件拷贝 + DB 写入） | 确认按钮 loading → `@shadcn/progress` 逐项进度条（500ms ~ 10s） |

---

## 安装完成

- 替换所有步骤内容为成功界面
- 小猫咪举旗插画 + "安装成功！"（H2）
- 安装摘要：安装了 N 个位置
- 「查看 Skill 详情」Primary + 「关闭」Ghost
- 成功插画 jellyPop 弹入